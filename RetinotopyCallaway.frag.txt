/* RetinotopyCallaway.frag.txt */

const float twopi = 2.0*3.141592653589793;

/* Values passed from vertex shader: */
varying float Black;
varying float White;
varying vec4 Grey;
varying float Center;
varying float vertOhorz;
varying float Width;
varying float checkSize;
varying float checkPhase;

void main()
{
    /* Query current output texel position: */
    vec2 pos = gl_TexCoord[0].xy;
    float currentPos; 
    float color1;

    if (checkPhase == 0.0) {
        color1 = White;
         }
    else {
        color1 = Black;
    }
            
    if (vertOhorz < 1.5) {
        currentPos = pos[0]-Center;
        }
    else {
        currentPos = pos[1]-Center;
        }
    
    float kernel = exp(-(currentPos*currentPos)/(Width*Width/2.0));
    float color = abs(color1-mod(floor(pos[0]/checkSize)+floor(pos[1]/checkSize),2.0));
    gl_FragColor = vec4(color,color,color,kernel);


}
